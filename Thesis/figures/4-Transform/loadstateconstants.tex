\begin{algorithm}
    $truePc \leftarrow$ value of pc in state file\\
    $maxPc \leftarrow$ number of addresses in BTOR2 model\\
    \textcolor{UniBlue}{pcValue} $\leftarrow truePc$ modulo $maxPc$\\
    add to model:\\
    \begin{tabular}[h]{>{\color{UniRed}}r l >{\color{UniGrey}}l l >{\slshape} l}
        \hline
        \hline
        \ttfamily
        n & constd & AS & \textcolor{UniBlue}{\rmfamily\textsl{pcValue}} & pcConst \\
        \hline
        \hline
    \end{tabular}\\
    \BlankLine

    \For{every register \textcolor{Green}{$x_i$}}{
        \If{register is initialised in state file}{
            \textcolor{UniBlue}{$registerValue$} $\leftarrow$ value of \textcolor{Green}{$x_i$}\\
            \If{\textcolor{UniBlue}{$registerValue$} $\neq 0$}{
                add to model:\\
                \begin{tabular}[h]{>{\color{UniRed}}r l >{\color{UniGrey}}l l >{\slshape} l}
                    \hline
                    \hline
                    \ttfamily
                    n & constd & D & \textcolor{UniBlue}{\rmfamily$registerValue$} & \textcolor{Green}{$x_i$}Const \\
                    \hline
                    \hline
                \end{tabular}\\
            }
        }
    }
    \BlankLine
    add to model:\\

    \begin{tabular}[h]{>{\ttfamily\color{UniRed}}r >{\ttfamily}l >{\ttfamily\color{UniGrey}}l >{\ttfamily}l >{\slshape} l}
        \hline
        \hline
        (n + 0) & state & Mem &                                     & memPH \\
        (n + 1) & init  & Mem & \textcolor{UniRed}{$memPH$ (n + 0)} &       \\
        \hline
        \hline
    \end{tabular}\\

    $\textcolor{UniRed}{lastPH} \leftarrow \textcolor{UniRed}{memPH}$\\
    $allInitialCells \leftarrow$ all initialised memory cells in the state file\\
    $cutInitialCells \leftarrow$ remove all cells with address over maxPc\\
    \For{every cell \textcolor{Green}{$c$} in $cutInitialCells$}{
        $address \leftarrow$ address of \textcolor{Green}{$c$}\\
        $value \leftarrow$ value of \textcolor{Green}{$c$}\\
        add to model:\\
        \begin{tabular}[h]{>{\ttfamily\color{UniRed}}r >{\ttfamily}l >{\ttfamily\color{UniGrey}}l >{\ttfamily}l >{\slshape} l}
            \hline
            \hline
            \ttfamily
            (n + 0) & constd & AS  & \textcolor{UniBlue}{\rmfamily$address$}               &                             \\
            (n + 1) & constd & B   & \textcolor{UniBlue}{\rmfamily$value$}                 &                             \\
            (n + 2) & write  & Mem & \textcolor{UniRed}{\textrm{$lastPH$} (n + 0) (n + 1)} & PHAfter\textcolor{Green}{C} \\
            \hline
            \hline
        \end{tabular}\\
        $\textcolor{UniRed}{lastPH} \leftarrow \textcolor{UniRed}{PHAfter\textcolor{Green}{C}}$\\
    }
    keep  $\textcolor{UniRed}{lastPH}$ for initialisation

    \caption[Generating initialisation constants]{Generating initialisation constants from state file in BTOR2}\label{alg:generateconstantsfromstate}
\end{algorithm}